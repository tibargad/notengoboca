<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>No tengo boca y debo gritar</title>
  <style>
    body {
      background-color: #000;
      color: #0f0;
      font-family: 'Courier New', Courier, monospace;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      min-height: 100vh;
      margin: 0;
    }
    #historia {
      margin-bottom: 20px;
      max-width: 600px;
    }
    #imagenContenedor {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 10px;
    }
    #imagenEscena {
    width: 50%;
    /* max-width: 300px;  <-- lo comento o elimino */
    min-width: 200px; /* para que no queden muy pequeñas en pantallas chicas */
    height: auto;
    display: block;
    margin-bottom: 5px;
    }
    
    #textoEjemplo {
      color: white;
      font-weight: bold;
      font-size: 1rem;
      display: none; /* por defecto oculto, se muestra solo en escenas intermedias */
    }
    #opciones {
      max-width: 600px;
    }
    .opcion {
      background-color: #111;
      color: #0f0;
      border: 1px solid #0f0;
      padding: 10px 15px;
      margin: 5px;
      cursor: pointer;
      display: inline-block;
      font-size: 1rem;
    }
    .opcion:hover {
      background-color: #0f0;
      color: #000;
    }
  </style>
</head>
<body>
  <div id="historia"></div>
  <div id="imagenContenedor">
    <img id="imagenEscena" src="" alt="" />
    <div id="textoEjemplo"></div>
  </div>
  <div id="opciones"></div>

  <!-- Audio -->
  <audio id="audioHover" src="sonidoapoyo.mp3" preload="auto"></audio>
  <audio id="audioClick" src="click.mp3" preload="auto"></audio>
  <audio id="audioCambio" src="cambio.mp3" preload="auto"></audio>
  <audio id="audioFondo" src="fondo.mp3" preload="auto" loop></audio>

  <script>
    const escenas = {
      inicio: {
        texto: "Tu nombre es Ted. Te despertás sobre un piso helado de metal. A tu alrededor partes de chatarra tecnológica se extienden por una habitación fría y desoladora. No estás solo. Nimdok, Gorrister, Benny, Ellie. Tus compañeros en la soledad. No existe nadie más que ustedes. Solo las máquinas. Y la supercomputadora. Lo único que te mantiene vivo. AM.",
        imagen: "1.jpg",
        opciones: [
          { texto: "Salir al desierto a buscar alimentos", siguiente: "valle" },
          { texto: "Desafiar al resto del grupo y separarte", siguiente: "suenos" }
        ]
      },
      valle: {
        texto: "AM es un ser violento y sin amor por tu grupo, eso ya lo sabés de sobra. Te mantiene vivo pero te detesta. No sos más que un simple juguete. Pasás las horas entre desafíos que la máquina inventa para salirse de su aburrimiento.  ",
        imagen: "2.jpg",
        opciones: [
          { texto: "Continuar", siguiente: "intermedia1" }
        ]
      },
      intermedia1: {
        texto: "Caminás por lo que llamaron en grupo El Valle de la Obsolescencia. Un bosque repleto de cables y artefactos electrónicos que AM fue descartando. En su obsesionado perfeccionismo constante la máquina se destruye y reconstruye para poder eliminar todo lo que no considera valioso de sí mismo.",
        imagen: "3.jpg",
        opciones: [
          { texto: "Continuar", siguiente: "benny" }
        ]
      },
      benny: {
        texto: "Benny intenta escapar.",
        imagen: "4.jpg",
        opciones: [
          { texto: "Continuar", siguiente: "intermedia2" }
        ]
      },
      intermedia2: {
        texto: "",
        imagen: "5.jpg",
        opciones: [
          { texto: "Continuar", siguiente: "benny_convu" }
        ]
      },
      benny_convu: {
        texto: "AM ataca a Benny. Queda en el piso convulsionando.",
        imagen: "6.jpg",
        opciones: [
          { texto: "Continuar", siguiente: "hierba" }
        ]
      },
      golpe: {
        texto: "Benny te golpea con su fuerza extra humana y te fractura la mandíbula. Te mira con ternura.",
        imagen: "6.jpg",
        opciones: [
          { texto: "Continuar", siguiente: "hierba" }
        ]
      },
      hierba: {
        texto: "AM provee de hierba para hacer un débil fuego. Se cuenta el origen de la máquina.",
        imagen: "6.jpg",
        opciones: [
          { texto: "Continuar", siguiente: "ataque" }
        ]
      },
      ataque: {
        texto: "AM lanza un ataque psicológico sobre el grupo. Huelen y sienten un ser gigante que se acerca.",
        imagen: "6.jpg",
        opciones: [
          { texto: "Salís corriendo buscando refugio", siguiente: "enganio" },
          { texto: "Quedarte con el grupo a enfrentar el monstruo", siguiente: "unidad" }
        ]
      },
      enganio: {
        texto: "Era un engaño psicológico. Te escapaste gritando como un maniático. El resto se desentiende.",
        opciones: [ { texto: "Te echás a llorar desconsoladamente. Pedís morir.", siguiente: "huracan" } ]
      },
      unidad: {
        texto: "El grupo se mantiene unido y firme ante la amenaza. Parece que solo eran ruidos y olores. El grupo se fortalece.",
        opciones: [ { texto: "Continuar", siguiente: "huracan" } ]
      },
      huracan: {
        texto: "Un huracán azota al grupo. Intentan aferrarse a lo que pueden. Te encontrás con AM en tu mente.",
        opciones: [ { texto: "Continuar", siguiente: "monstruo" } ]
      },
      monstruo: {
        texto: "El grupo se encuentra con un ser mitológico alado. AM dice que para comer necesitan vencerlo.",
        opciones: [
          { texto: "Pedirle a AM armas para poder vencer", siguiente: "armas" },
          { texto: "Intentar atacar al monstruo sin armas", siguiente: "sin_armas" }
        ]
      },
      armas: {
        texto: "Aparece frente a vos una pistola de agua y un arco sin hilo.",
        opciones: [ { texto: "Continuar", siguiente: "terremoto" } ]
      },
      sin_armas: {
        texto: "El grupo intenta disuadirte de no hacerlo.",
        opciones: [ { texto: "Explicás que esto no va a tener final. Que necesitan trabajar en equipo y encontrar una solución", siguiente: "sublevacion" } ]
      },
      sublevacion: {
        texto: "El resto se subleva y te atacan hasta que quedas inconsciente.",
        opciones: [ { texto: "Continuar", siguiente: "terremoto" } ]
      },
      terremoto: {
        texto: "Comienza un terremoto. El grupo cae y queda maltrecho. Pasan por diversos escenarios. Siguen caminando con hambre hacia la bestia.",
        opciones: [ { texto: "Continuar", siguiente: "estalactitas" } ]
      },
      estalactitas: {
        texto: "Benny ataca a Gorrister. Ceden estalactitas de hielo. Te das cuenta que podés liberarlos de una sola forma.",
        opciones: [
          { texto: "Tomás una de las estalactitas y decidís matar al resto del grupo.", siguiente: "final1" },
          { texto: "Tomás una de las estalactitas y decidís terminar tu propia existencia.", siguiente: "final2" }
        ]
      },
      final1: {
        texto: "FINAL. No tengo boca y debo gritar.",
        opciones: []
      },
      final2: {
        texto: "FINAL. AM se infiltra en tu mente y, como cuando golpeas en un sueño, no lográs tener la suficiente fuerza para terminar tu existencia. AM te condena a No Tener Boca.",
        opciones: []
      }
    };

    const audioHover = document.getElementById("audioHover");
    const audioClick = document.getElementById("audioClick");
    const audioCambio = document.getElementById("audioCambio");
    const audioFondo = document.getElementById("audioFondo");
    const textoEjemplo = document.getElementById("textoEjemplo");

    window.addEventListener("load", () => {
      audioFondo.volume = 0.3;
      audioFondo.play().catch(() => {
        console.log("La música de fondo requiere interacción.");
      });
    });
    document.addEventListener("click", () => {
      if (audioFondo.paused) {
        audioFondo.play().catch(() => {
          console.log("No se pudo reproducir el audio de fondo.");
        });
      }
    }, { once: true });

    function mostrarEscena(escenaId) {
      const escena = escenas[escenaId];
      const historiaDiv = document.getElementById("historia");
      const opcionesDiv = document.getElementById("opciones");
      const imagen = document.getElementById("imagenEscena");

      historiaDiv.textContent = escena.texto;
      opcionesDiv.innerHTML = "";

      if (escena.imagen) {
        imagen.src = escena.imagen;
        imagen.style.display = "block";
      } else {
        imagen.style.display = "none";
      }

      // Mostrar texto "EJEMPLO" solo en escenas intermedias
      if (escenaId === "intermedia1" || escenaId === "intermedia2") {
        textoEjemplo.style.display = "block";
      } else {
        textoEjemplo.style.display = "none";
      }

      audioCambio.currentTime = 0;
      audioCambio.play();

      escena.opciones.forEach(opcion => {
        const boton = document.createElement("button");
        boton.textContent = opcion.texto;
        boton.className = "opcion";

        boton.onmouseenter = () => {
          audioHover.currentTime = 0;
          audioHover.play();
        };

        boton.onclick = () => {
          audioClick.currentTime = 0;
          audioClick.play();
          mostrarEscena(opcion.siguiente);
        };

        opcionesDiv.appendChild(boton);
      });
    }

    mostrarEscena("inicio");
  </script>
</body>
</html>
